{"ast":null,"code":"var _jsxFileName = \"/Users/avinash/Downloads/ticket_booking_unstop-main/src/Components/Booking.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport styled from 'styled-components';\n\n// Component that manages booking of the seats.\n// It also manages how to find nearby seats.\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Booking = _ref => {\n  _s();\n  let {\n    status,\n    setStatus,\n    reset = true\n  } = _ref;\n  // calculate current available seats\n  // it will help to set upper limit on number of\n  // seats user can select currently.\n  let available = 0;\n  for (let i = 0; i < 80; i++) if (status[i] === false) available++;\n\n  // seats state will basically store user input - number of seats user wants to book.\n  const [seats, setSeats] = useState(1);\n  // to show the output (seat numbers booked) to the user.\n  const [notification, setNotification] = useState({\n    status: false,\n    seats: ''\n  });\n\n  // will handle input change.\n  const handleChange = e => {\n    setSeats(e.target.value);\n  };\n\n  // to handle 'Book' click.\n  const handleClick = e => {\n    fetch(\"http://localhost:3001/book\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"numSeats\": seats\n      })\n    }).then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json(); // Parse the response JSON\n    }).then(data => {\n      // Handle the data returned from the API here\n      setStatus(data.bookedSeats);\n      console.log(data.bookedSeats); // You can log or use the data as needed\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n\n    // After 5 seconds, remove the output\n    setTimeout(() => setNotification({\n      status: false,\n      seats: ''\n    }), 5000);\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [available > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(InputBox, {\n        type: \"number\",\n        value: seats,\n        onChange: handleChange,\n        min: 1,\n        max: Math.min(available, 7)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(BookButton, {\n        disabled: seats > Math.min(available, 7) || notification.status,\n        onClick: handleClick,\n        children: \"Book\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ResetButton, {\n        disabled: available === 80,\n        onClick: () => reset(),\n        children: \" Reset \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true), notification.status && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: [\"You have successfully booked \", seats, \" ticket(s)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: [\"Here are you seat number(s): \", notification.seats]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true), available > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Please Select Number of Seats You want to Book! \\uD83D\\uDE42\\uD83C\\uDFAB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), available > 0 && available < 7 && seats > available && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"b\", {\n        children: [\"You can't book \", seats, \" ticket(s) for now\\u2639\\uFE0F.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 39\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), available > 0 && available >= 7 && seats > 7 && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"b\", {\n        children: [\"You can only book up to \", 7, \" tickets at a time.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 39\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), !available && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\",\n          fontSize: \"1.5em\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Tickets SOLD OUT \\uD83D\\uDE13\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 62\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          opacity: \"0.6\",\n          width: \"auto\"\n        },\n        children: \"Please try again some time later!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ResetButton, {\n        disabled: available === 80,\n        onClick: () => reset(),\n        children: \" Reset \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n// Styling the container of the component.\n// fixing width, bringing content to center, etc.\n_s(Booking, \"P8Z1QEpHkXpwffk3NofZ3n5PG7k=\");\n_c = Booking;\nconst Container = styled.div`\n    width: 100%;\n    text-align: center;\n    padding-top: 3em;\n    padding-bottom: 1em;\n    margin-top: 0em;\n`;\n\n// Styling the button for Booking the seats.\n_c2 = Container;\nconst BookButton = styled.button`\n    padding: .5em 1em;\n    font-weight: bold;\n    border-radius: 5px;\n    background-color: blue;\n    color: white;\n    border: none;\n    cursor: pointer;\n    margin-left: 1em;\n    \n    // when hovering.\n    &:hover{\n        background-color: rgba(0, 0, 255, .8);\n    }\n\n    // When disabled - when seats more than current limit are selected.\n    &:disabled{\n        opacity: .4;\n        cursor: not-allowed;\n    }\n`;\n\n// Styling the Reset Button.\n_c3 = BookButton;\nconst ResetButton = styled.button`\n    padding: .5em 1em;\n    font-weight: bold;\n    border-radius: 5px;\n    background-color: red;\n    color: white;\n    border: none;\n    cursor: pointer;\n    margin-left: 1em;\n\n    // When Hovering\n    &:hover{\n        background-color: rgba(255, 0, 0, .8);\n    }\n\n    // When Disabled - when it is already reseted.\n    &:disabled{\n        opacity: .4;\n        cursor: not-allowed;\n    }\n`;\n\n// Styling the input box. \n_c4 = ResetButton;\nconst InputBox = styled.input`\n    text-align: center;\n    font-weight: bold;\n    outline: none;\n    display: inline-block;\n    width: 10%;\n    margin-inline: auto;\n    padding: .5em .75em;\n`;\n_c5 = InputBox;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"Booking\");\n$RefreshReg$(_c2, \"Container\");\n$RefreshReg$(_c3, \"BookButton\");\n$RefreshReg$(_c4, \"ResetButton\");\n$RefreshReg$(_c5, \"InputBox\");","map":{"version":3,"names":["React","useState","styled","Booking","status","setStatus","reset","available","i","seats","setSeats","notification","setNotification","handleChange","e","target","value","handleClick","fetch","method","headers","body","JSON","stringify","then","response","ok","Error","json","data","bookedSeats","console","log","catch","error","setTimeout","Math","min","color","fontSize","opacity","width","Container","div","BookButton","button","ResetButton","InputBox","input"],"sources":["/Users/avinash/Downloads/ticket_booking_unstop-main/src/Components/Booking.js"],"sourcesContent":["import React, { useState } from 'react'\nimport styled from 'styled-components'\n\n// Component that manages booking of the seats.\n// It also manages how to find nearby seats.\nexport const Booking = ({status, setStatus, reset=true}) => {\n  // calculate current available seats\n  // it will help to set upper limit on number of\n  // seats user can select currently.\n  let available = 0;\n  for(let i=0; i<80; i++)\n    if(status[i]===false) available++;\n\n  // seats state will basically store user input - number of seats user wants to book.\n  const [seats, setSeats] = useState(1);\n  // to show the output (seat numbers booked) to the user.\n  const [notification, setNotification] = useState({status: false, seats: ''});\n\n  // will handle input change.\n  const handleChange = (e) => {\n    setSeats(e.target.value);\n  }\n\n  // to handle 'Book' click.\n  const handleClick = (e) => {\n    fetch(\"http://localhost:3001/book\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ \"numSeats\": seats }),\n    })\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n        return response.json(); // Parse the response JSON\n      })\n      .then((data) => {\n        // Handle the data returned from the API here\n        setStatus(data.bookedSeats);\n        console.log(data.bookedSeats); // You can log or use the data as needed\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      });\n  \n    // After 5 seconds, remove the output\n    setTimeout(() => setNotification({ status: false, seats: '' }), 5000);\n  };\n  \n\n  return (\n    <Container>\n        {/* If available seats are more than 0 then only show the input field. */}\n        { (available > 0) && \n            <>\n                {/* Input box to take number of seats as input from the user. */}\n                <InputBox type={\"number\"} value={seats} onChange={handleChange} min={1} max={Math.min(available, 7)}/>\n                {/* Button to book seats. */}\n                <BookButton disabled={seats > Math.min(available, 7) || notification.status} onClick={handleClick}>Book</BookButton>\n                {/* Button to reset the whole coach */}\n                <ResetButton disabled={available===80} onClick={() => reset()}> Reset </ResetButton>\n            </>\n        }\n\n        {/* if notification state is set then will show seat numbers booked for the user. */}\n        {\n            notification.status &&\n            <>\n                <p><b>You have successfully booked {seats} ticket(s)</b></p>\n                <p><b>Here are you seat number(s): {notification.seats}</b></p>\n            </>\n        }\n\n        {/* Just showing friendly message to the user. */}\n        { \n            (available > 0) && \n            <p><b>Please Select Number of Seats You want to Book! 🙂🎫</b></p> \n        } \n\n        {/* Handling invalid inputs */}\n        { \n            (available > 0  && available < 7 && seats>available) && \n            <p style={{color: \"red\"}}><b>You can't book {seats} ticket(s) for now☹️.</b></p>\n        }\n\n        {/* Showing the limit to the user. */}\n        { \n            (available > 0  && available >=7 && seats>7) && \n            <p style={{color: \"red\"}}><b>You can only book up to {7} tickets at a time.</b></p>\n        }\n\n        {/* When no tickets are available */}\n        {\n            !available && \n            <>\n                <p style={{color: \"red\", fontSize: \"1.5em\"}}><b>Tickets SOLD OUT 😓</b></p>\n                <p style={{opacity: \"0.6\", width: \"auto\"}}>Please try again some time later!</p>\n                <ResetButton disabled={available===80} onClick={() => reset()}> Reset </ResetButton>\n            </>\n        }\n    </Container>\n  )\n}\n\n// Styling the container of the component.\n// fixing width, bringing content to center, etc.\nconst Container = styled.div`\n    width: 100%;\n    text-align: center;\n    padding-top: 3em;\n    padding-bottom: 1em;\n    margin-top: 0em;\n`;\n\n// Styling the button for Booking the seats.\nconst BookButton = styled.button`\n    padding: .5em 1em;\n    font-weight: bold;\n    border-radius: 5px;\n    background-color: blue;\n    color: white;\n    border: none;\n    cursor: pointer;\n    margin-left: 1em;\n    \n    // when hovering.\n    &:hover{\n        background-color: rgba(0, 0, 255, .8);\n    }\n\n    // When disabled - when seats more than current limit are selected.\n    &:disabled{\n        opacity: .4;\n        cursor: not-allowed;\n    }\n`;\n\n// Styling the Reset Button.\nconst ResetButton = styled.button`\n    padding: .5em 1em;\n    font-weight: bold;\n    border-radius: 5px;\n    background-color: red;\n    color: white;\n    border: none;\n    cursor: pointer;\n    margin-left: 1em;\n\n    // When Hovering\n    &:hover{\n        background-color: rgba(255, 0, 0, .8);\n    }\n\n    // When Disabled - when it is already reseted.\n    &:disabled{\n        opacity: .4;\n        cursor: not-allowed;\n    }\n`;\n\n// Styling the input box. \nconst InputBox = styled.input`\n    text-align: center;\n    font-weight: bold;\n    outline: none;\n    display: inline-block;\n    width: 10%;\n    margin-inline: auto;\n    padding: .5em .75em;\n`;\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}